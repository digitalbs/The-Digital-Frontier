<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Canvas Animation Test Page</title>
    <link rel="stylesheet" href="Stylesheets/common.css">
  </head>
  <body>
    <header>
      <h1>Canvas Animation Test Page</h1>
    </header>
    <canvas id="canvas"></canvas>
    <textarea id="log"></textarea>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="lib/utils.js" type="text/javascript"></script>
    <script>
    
    
    window.onload = function () {
    	
      var canvas = document.getElementById('canvas'),
          context = canvas.getContext('2d'),
          mouse = utils.captureMouse(canvas),
          rect = {x: 550 / 2, y: 550 / 3};
		  log = $('#log'); 
       
	  canvas.width = 550;
	  canvas.height = 550;        
	  

	  (function drawFrame(){
	  	window.requestAnimationFrame(drawFrame, canvas);
	  	context.clearRect(0, 0, canvas.width, canvas.height);
	  	
	  	var dx = rect.x - mouse.x,
	  		dy = rect.y - mouse.y,
	  		dist = Math.sqrt(dx * dx + dy * dy);
	  	
	  	context.fillStyle = "#c40404";
	  	context.fillRect(rect.x - 2, rect.y - 2, 14, 14);
	  	
	  	//draw line
	  	context.beginPath();
	  	context.moveTo(rect.x, rect.y);
	  	context.lineTo(mouse.x, mouse.y);
	  	context.closePath();
	  	context.stroke();
	  	
	  	$(log).val("distance: " + dist);
	  	
	  }());
	  	  
    };
    </script>
  </body>
</html>
